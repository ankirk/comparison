(function(D){var E=window.AmazonUIPageJS||window.P,ta=E._namespace||E.attributeErrors,f=ta?ta("DetailPageImageBlockAssets",""):E;f.guardFatal?f.guardFatal(D)(f,window):f.execute(function(){D(f,window)})})(function(D,E,ta){D.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var k=E.ue;if(k){var l=k.count(f)||0;k.count(f,l+1)}}},postTimeMetric:function(f,k){if("undefined"!==typeof f&&"undefined"!==typeof k){var l=E.ue;l&&l.count(f,k)}}}});"use strict";D.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});D.register("postEarlyMetric",function(){return null});"use strict";D.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,k,l,b){f=f.extend(!0,{},l,b);var h=new k(f);D.register("ImageBlockAPI",function(){return h.api});return h});"use strict";D.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(f,k,l){f=l.airyConfig;f.jsUrl&&D.load.js(f.jsUrl);f.cssUrl&&D.load.css(f.cssUrl)});"use strict";
D.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(f,k,l,b,h,F){var w={};return function(f){var e=this;e.dispatch=function(b,e){var f=w[b];h.isDefined(f)&&k.each(f,function(b,d){d.call(E,e)})};e.register=function(b,e){h.isDefined(w[b])||(w[b]=[]);"function"===typeof e&&w[b].push(e)};e.model=new l(f,e);e.view=new b(f,e,e.model);e.api=new F(f,e,e.model);e.init=function(){e.model.init();e.view.init()};e.init()}});"use strict";
D.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(f,k,l){function b(b,d,h,e,t){l.isDefined(b)&&(I.type=b);l.isDefined(d)&&(I.index=d);l.isDefined(h)&&(I.thumbnailIndex=h);l.isDefined(e)&&(I.variant=e);l.isDefined(t)&&(I.color=t)}function h(d){b("image",0,0,"MAIN",d||e.landingAsinColor||e.defaultColor)}function F(d){d=d.data;B=f.copy(I);b(d.type,d.index,d.thumbnailIndex,d.variant,d.color)}function w(b){F(b);b=f.copy(b);b.data=f.copy(I);d.dispatch("updateView",b)}function r(){B=
f.copy(I);h(I.color)}var e,d,I={},B={},N,G;return function(b,k){d=k;e=b;d.register("updateSelection",w);d.register("updateModel",F);d.register("resetModel",r);this.init=function(){h()};this.getCurrentItem=function(){return f.copy(I)};this.getPreviousItem=function(){return f.copy(B)};this.setCurrentEvent=function(b){N=b};this.getCurrentEvent=function(){return N};this.setImmersiveViewModalInstance=function(b){G=b};this.getImmersiveViewModalInstance=function(){return G};this.updateTitle=function(b){e.title=
b}}});"use strict";D.when("ImageBlockBTF","postMetric").execute(function(f,k){function l(b,f,k,l,e){function d(g){"click"===g.type&&l.postCountMetric("thumbClick");"click"===g.type&&C.overrideAltImageClickAction?x.dispatch("thumbActionClick",g):x.dispatch("updateSelection",g)}function I(g){C.useClickZoom||x.dispatch("imageClick",g)}function B(g){C.useClickZoom||x.dispatch("imageHover",g)}function N(g){x.dispatch("button360Click",g)}function G(g){!k.isDefined(g)||"swatchClick"!==g.type&&"updatedData"!==
g.type?(t.update(g),"swatchHover"!==g.type&&J.getPreviousItem().thumbnailIndex!==g.data.thumbnailIndex&&l.postCountMetric(g.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",g.data)):t.render(g.data.color,!1,g.onload)}function y(g){x.dispatch("resize",g)}function H(g){k.selectThumbnail(g,m)}function q(g){var b=g.data,d;b&&"ingress"!==b.type&&"click"===g.type&&(d=g);return d}function L(b){var d=J.getCurrentItem(),m={type:"click"};m.$declarativeParent=b;m.data=d;return m}var t,
C,x,J,m;return function(g,u,k){t=this;C=g;x=u;J=k;m=f("#imageBlock #altImages ul");var a=f("#imageBlock .canvas"),c=f("#main-image-container"),n;t.subViews=[];for(u=0;u<e.length;u++)t.subViews.push(new e[u](g,k,t,x));t.render=function(b,g,P){var d=0;m.find(".item").remove();b=b||J.getCurrentItem().color;f.each(t.subViews,function(n,e){d=e.render(b,d,a,m,c,g,P)||d});var e=m.find(".a-button-selected").closest(".a-declarative");n=L(e)};t.init=function(){m=f("#imageBlock #altImages ul");var a=m.find(".a-button-selected").closest(".a-declarative"),
c=a.data("action"),a=a.data(c)||{};a.color=C.landingAsinColor||C.defaultColor;x.dispatch("updateModel",{data:a});t.render(a.color,!0);C.isDebug&&E.console&&console.log(C);x.register("updateView",G);x.register("selectThumbnail",H);"function"===typeof E.markFeatureInteractive&&E.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});C.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter",
"mouseleave"],d);b.declarative("thumb-action",["click"],d);b.declarative("main-image-click",["click"],I);b.declarative("main-image-click",["mouseenter","mouseleave"],B);b.declarative("button-360-click",["click"],N);b.on("resize",y)};t.update=function(a){f.each(t.subViews,function(c,b){b.update(a)});C.usePeekHover&&("mouseleave"===a.type?x.dispatch("updateSelection",n):"click"===a.type&&(n=q(a)||n))}}}var b=["A","jQuery","imageBlockUtils","postMetric"].concat(f.views);D.when.apply(D,b).register("ImageBlockView",
function(){for(var b=arguments[0],f=arguments[1],k=arguments[2],r=arguments[3],e=[],d=4,I=arguments.length;d<I;d++)e.push(arguments[d]);return l(b,f,k,r,e)})});"use strict";D.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(f,k,l,b,h,F,w){function r(a,c,b,d){if(!l.isjQueryObjDefined(a.find(".a-button-selected"))){var n=g.getCurrentItem();if(!d||"chromeless-video"!==n.type||!m.autoplayVideo){d=
0;"image"===n.type&&(d=Math.max(I(n.color,n.variant),0));var e=c+d;e>=b&&(d=0,e=c);c=l.getImageHash(n.color,d,m);-1!==c&&(u.dispatch("updateModel",{data:{index:d,thumbnailIndex:e,variant:c.variant,type:"image"}}),c=a.find(".item").get(e),l.selectGivenThumbnail(k(c),a))}}}function e(a,c,b){c=m.colorImages&&m.colorImages[c];var d=a;l.isDefined(c)&&(k.each(c,function(c,b){a<m.maxAlts&&(l.createThumbnail({type:"image",index:c,thumbnailIndex:a,variant:b.variant},b.thumb,z,"imageThumbnail"),a++)}),F.isEnabled&&
w.logAltImgRequestPlacedOnThumbnails(k,F,g),r(z,d,a,b));return a}function d(a,c){if("image"===a.type){var b=k("#image-canvas-caption #canvasCaption"),g,d=m.staticStrings,n=m.colorImages,e=a.color,t=a.index;c&&m.useIV?g=d.clickToExpand:n[e]&&n[e][t].hiRes&&m.useHoverZoom?(g=m.useHoverZoomIpad?d.touchToZoom:m.useClickZoom?d.clickToZoom:d.rollOverToZoom,m.hoverZoomIndicator&&(g="\x3cimg src\x3d'"+m.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+g)):m.useIV&&(g=d.clickToExpand);b.html(g)}}function I(a,
c){return l.getIndexForVariant(a,c,m)}function B(a,b){var g="a-dynamic-image";if(!m.acEnabled){var d;k.each(a.main,function(a,c){l.isDefined(d)||(d=parseFloat(c[1]/c[0])<=parseFloat(m.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});g+=d}var n=l.getMaxDimensionsOfMainImage(a.main,c,m),e=n[0],t=n[1],n=k("\x3cdiv\x3e\x3c/div\x3e"),e={"max-height":e,"max-width":t};n.addClass(g).css(e).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",a.main);
return n}function N(c){var b=a.find(".swatchHoverExp");c=B(c);b.find(".imgTagWrapper").html(c);f.loadImageManually(c);return b}function G(a){var b=c.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");m.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(m.imgTagWrapperClasses)}function y(c,b){if("image"===c.type||"unavailable"===c.type||"lazy-loaded"===c.type){var n=l.getImageHash(c.color,c.index,m);if(-1===n)return n={data:{index:0,thumbnailIndex:0,variant:"",
type:"unavailable"}},l.lazyLoadingRequired(c,g,m)?L(c,!1,b):(u.dispatch("updateModel",n),l.showUnavailable(c.color)),-1;var e=a.find(".item.itemNo"+c.thumbnailIndex);if(!l.isjQueryObjDefined(e)){var e=c.thumbnailIndex,e=a.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+e+" maintain-height"),t=B(n,b);e.find(".placeHolder").replaceWith(t);a.find(".list").append(e);f.loadImageManually(t)}G(e);u.dispatch("loadMagnifier");d(c);m.useIV&&l.isDefined(n.hiRes)&&
e.css("cursor","pointer");c.isUserGenerated&&(e=g.getPreviousItem(),t=c.variant,l.isDefined(t)&&e.thumbnailIndex!==c.thumbnailIndex&&(F.isEnabled&&w.logAltImgRequestServed(F),h.postCountMetric("ImageThumbnailSelectedVariant:"+t),0===t.indexOf("IG")&&(h.postCountMetric("IGImageSelectedVariant:"+t),h.postCountMetric("IGImageSelectedEvent:"+c.interaction))));f.trigger("dp:image-block:update",n)}}function H(c){var b=Math.max(I(c.color,g.getCurrentItem().variant),0),b=l.getImageHash(c.color,b,m);if(-1===
b)return l.lazyLoadingRequired(c,g,m)?l.lazyLoadOnHoverEnabled(m)&&(q(".3",!0),l.spinner(a,!0),f.delay(function(){g.getCurrentEvent().data===c&&L(c,!0)},500)):l.showUnavailable(c.color),-1;var d=N(b);G(d);f.trigger("dp:image-block:update",b)}function q(c,b){b?a.css("opacity",c):k("#imageBlock").css("opacity",c)}function L(c,d,e){n=d;U=e;var f=c.color,p=m.colorToAsin[f];if(p&&p.asin){var h={};h.params={asin:p.asin,productGroupID:m.productGroupID,color:f};h.success=function(a){a?(l.ajaxState(p.asin,
"success"),m.colorImages[f]=a.colorImage,l.isDefined(m.spin360ColorEnabled)&&(m.spin360ColorEnabled[f]=a.enable360),f===c.color&&(d&&n?c===g.getCurrentEvent().data&&(t(c),H(c)):(a={type:"updatedData",data:g.getCurrentItem(),onload:e||U},u.dispatch("updateView",a))),D.register(l.rankedImagesReadyEvent(p.asin))):l.ajaxState(p.asin,"fail")};h.error=function(){l.ajaxState(p.asin,"fail")};h.indicator=l.spinner(a);l.ajaxState(p.asin,void 0)&&"fail"!==l.ajaxState(p.asin,void 0)||(q(".3",d),b.load("/gp/product/features/apparel-main-image/ranked-images.html",
h),l.ajaxState(p.asin,"sent"));return m.colorImages&&m.colorImages[f]}}function t(c,b){l.lazyLoadingRequired(c,g,m)||(k("#imageBlock").css("opacity","1"),a.css("opacity","1"),l.spinner(a,!1),a.find("li").removeClass("selected"),k("#image-canvas-caption #canvasCaption").empty(),l.hideUnavailable(),b&&a.find(".list .item").remove())}function C(){var b=a.find(".item .imgTagWrapper"),g=l.getContainerHeight(c,m.holderRatio,m.holderMaxHeight);0<g&&(c.height(g),b.height(g));a.find("img.a-dynamic-image").each(function(){var a=
k(this);a.data("a-manual-replacement")&&f.loadDynamicImage(this);var b=a.data("a-dynamic-image"),b=l.getMaxDimensionsOfMainImage(b,c,m);a.css({"max-height":b[0]+"px","max-width":b[1]+"px"})})}function x(c){d(g.getCurrentItem(),"mouseenter"===c.type)}var J,m,g,u,z,a,c,n,U,p;return function(b,d,n,f){J=this;m=b;g=d;u=f;m.colorImages[m.landingAsinColor]=m.colorImages[m.defaultColor];J.render=function(b,d,n,f,h,k,x){a=n;z=f;c=h;p=e(d,b,k);k||(b=g.getCurrentItem(),l.lazyLoadingRequired(b,g,m)&&u.dispatch("updateModel",
{data:{type:"lazy-loaded"}}));t(g.getCurrentItem(),!k);y(g.getCurrentItem(),x);return p};J.update=function(c){var a=c.data;g.setCurrentEvent(c);"ingress"!==a.type&&t(c.data,!1);"swatchHover"===c.type?a.color===g.getCurrentItem().color?y(g.getCurrentItem()):c.captured||-1===H(a)||(c.captured=!0):"image"===a.type&&(a.interaction=c.type,a.isUserGenerated=!0,"mouseenter"===c.type&&h.postCountMetric("dpcc_imageThumbHovered_"+(a.thumbnailIndex+1)+"_"+p),y(a),m.usePeekHover&&"click"!==c.type||(l.selectGivenThumbnail(c.$declarativeParent,
z),"click"===c.type&&h.postCountMetric("dpcc_imageThumbClicked_"+(a.thumbnailIndex+1)+"_"+p)))};u.register("imageHover",x);u.register("resize",C)}});"use strict";D.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(f,k,l,b,h,F){function w(b){q?b.css("cursor","url('"+B.staticImages.zoomIn+"'), auto"):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))}function r(b){var d=
b.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);b={};if(l.isDefined(d))for(var d=d[1].split("_"),e=0;e<d.length;e++){var f=d[e].match(/^([A-Z]+)(\d+(\.\d+)?)$/);l.isDefined(f)&&(b[f[1]]=parseInt(f[2],10))}return b}function e(d,e){function I(){var a;e.useClickZoom?(a=e.offsetInClickZoom,a=[Math.min(1,Math.max(0,y[0]-(P[0]+a))/(P[2]-2*a)),Math.min(1,Math.max(0,y[1]-(P[1]+a))/(P[3]-2*a))]):a=n&&n.updatePosition();if(a&&c&&c.detailSize){var b=[c.detailSize[0]-c.rect.width,c.detailSize[1]-c.rect.height];
f.capabilities.rtl?c.detailImage.get(0).style.right=-(a[0]*b[0])+"px":c.detailImage.get(0).style.left=-(a[0]*b[0])+"px";c.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function x(a){var c=Q?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";y=Q?[c.pageX,c.pageY]:[a.pageX,a.pageY];if(f.capabilities.rtl){var b=k(E).width();y=Q?[b-c.pageX,c.pageY]:[b-a.pageX,a.pageY]}}function J(a){Q&&a.preventDefault();x(a);if(e.useClickZoom)a=[P[0],P[1],P[0]+P[2],P[1]+P[3]];else{var c=n?n.offset:d.offsetParent().offset();
a=[p[0]+c.left,p[1]+c.top,p[0]+p[2]+c.left,p[1]+p[3]+c.top];B.acEnabled&&(a=[c.left,c.top,d.offsetParent().width()+c.left,d.offsetParent().height()+c.top])}y[0]<a[0]||y[1]<a[1]||y[0]>=a[2]||y[1]>=a[3]||B.acEnabled&&!d.offsetParent().hasClass("a-dynamic-image-container")?(e.fadeMagnifier?fa||(fa=!0,ca=setTimeout(function(){m(!0)},500)):e.useClickZoom||m(),aa&&(aa=!1,clearTimeout(ga))):(aa||(aa=!0,ga=setTimeout(function(){b.postCountMetric("dppc_hoverZoomOpened");h.isEnabled&&F.logHoverZoomRequestServed(h)},
1E3)),e.fadeMagnifier&&fa&&(fa=!1,clearTimeout(ca)),I())}function m(a){a&&z.suppressMagnifier(!0);if(G&&(c&&c.hide(),n&&(n.destroy(),n=null),G=!1,Q?(d.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),k(document).trigger("disengaged.magnifier")):k(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),u(),a))d.one("click.magnifier touchstart.magnifier",function(a){g(a,!0)})}function g(a,g){g&&z.suppressMagnifier(!1);if(!G&&!H&&(0===D&&(b.postCountMetric("dppc_hoverTime",
new Date-(E.ue&&E.ue.t0||0)),D=1),ea[N]||(b.postCountMetric("dppc_hoverMain"),ea[N]=1),p=[d.position().left,d.position().top,d.width(),d.height()],N&&(x(a),c?c.refit().show():c=new la,e.useClickZoom||(n=n||new ia),P=c.getWindowSize(),I()),G=!0,Q?(d.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",J).bind("touchend.magnifier",m),k(document).trigger("engaged.magnifier")):(B.acEnabled?d.offsetParent().unbind("mousemove.magnifier"):d.unbind("mousemove.magnifier"),k(document).trigger("engaged.magnifier").bind("mousemove.magnifier",
J)),g)){var f=k("#zoomWindow");if(0<f.length)f.one("click.magnifier touchend.magnifier",function(a){m(!0)})}}function u(){e.useHoverZoom&&(Q?d.bind("touchstart.magnifier touchmove.magnifier",g):B.acEnabled?d.offsetParent().bind("mousemove.magnifier",g):d.bind("mousemove.magnifier",g))}var z=this,a={detailImageUrl:d.attr("data-old-hires"),location:"over",locationElement:d,prelaod:"ready",zIndex:50,offsetInClickZoom:50};e=k.extend(a,e);e.adjustment=[10,0,-10,0];var c=null,n=null,y=null,p=null,P=null,
K={"null":1,"":1,undefined:1},G=!1,H=!1,N=e.detailImageUrl,Q=e.useHoverZoomIpad||0,D=0,ea={},ia=function(){function a(b){var e=Math.round(Math.min(d.width(),c.rect.width/b));b=Math.round(Math.min(d.height(),c.rect.height/b));f.css({width:e,height:b});g=[e,b]}var b=this,g=[0,0],n=(c.detailSize&&c.detailSize[0]||5E8)/p[2],m=(c.detailSize&&c.detailSize[1]||5E8)/p[3],n=m>n?m:n;k("#magnifierLens").remove();var f=k("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});e.generalImageUrls.zoomLensBackground&&
f.css({backgroundImage:"url("+e.generalImageUrls.zoomLensBackground+")"});B.showMagnifierOnHover?w(f):f.css("cursor","pointer");b.updatePosition=function(){var a=[p[2]-g[0],p[3]-g[1]],c=0>=a[0]?.5:Math.max(0,Math.min(1,(y[0]-g[0]/2-p[0]-b.offset.left)/a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(y[1]-g[1]/2-p[1]-b.offset.top)/a[1])),e=p[0]+Math.round(c*a[0]),a=p[1]+Math.round(d*a[1]);f.get(0).style.left=e+"px";f.get(0).style.top=a+"px";return[c,d]};b.destroy=function(){f.remove()};b.offset=d.offsetParent().offset();
a(n);b.updatePosition();f.appendTo(d.parent());c.detailImage[0].complete||c.detailImage.load(function(){var d=c.detailImage.width()/p[2];a(d);b.updatePosition()})};ia.preload=function(){z.preload(e.generalImageUrls.lensBackgroundUrl)};var la=function(){function a(){var c={};if("over"===e.location){var c=e.useClickZoom,n={},m=k("#leftCol"),p=k("#centerCol"),h=k("#rightCol"),u=k("#hover-zoom-end"),x=k("#actionPanelContainer"),q=l.isjQueryObjDefined(m)?m.outerHeight():p.outerHeight();n.top=l.isjQueryObjDefined(m)?
m.offset().top:p.offset().top;n.bottom=q+n.top;n.right=l.isjQueryObjDefined(h)?h.offset().left:x.offset().left;n.left=c?0:m.offset().left+m.outerWidth();l.isjQueryObjDefined(u)&&u.offset().top>n.bottom&&(n.bottom=u.offset().top);c=n}else"right"===e.location&&(c=d.offset(),c={left:c.left+d.outerWidth(),top:c.top,right:c.left+d.outerWidth()+400,bottom:c.top+400});e.minHeightElement&&(c.bottom=Math.max(c.bottom,c.top+k(e.minHeightElement).outerHeight()));c.bottom=Math.min(c.bottom,k(E).scrollTop()+k(E).height());
c.left+=g[0];c.top+=g[1];c.right+=g[2];c.bottom+=g[3];c.width=c.right-c.left;c.height=c.bottom-c.top;e.enhancedHoverOverlay&&l.isDefined(E.pageXOffset)&&(n=k(E).width(),c.width=n-c.left+E.pageXOffset-18,c.height-=14);f.css({left:c.left,top:c.top,width:c.width,height:c.height});b.rect=c;return b}function c(a){var d=new Image;b.detailSize=[0,0];d.onload=function(){b.detailSize=[d.width,d.height];I()};d.src=a.attr("src");if(0<d.width&&0<d.height)b.detailSize=[d.width,d.height];else if(e.detailImageSize)b.detailSize=
e.detailImageSize;else{a=r(d.src);var g=p[2]/p[3];a.SS||a.AA?(a=a.SS||a.AA,b.detailSize=[a,a]):a.SX?b.detailSize=[a.SX,Math.round(a.SX/g)]:a.SY?b.detailSize=[Math.round(a.SY*g),a.SY]:a.SL&&(b.detailSize=1<=g?[a.SL,Math.round(a.SL/g)]:[Math.round(a.SL*g),a.SL])}}var b=this,g=e.adjustment;k("#zoomWindow").remove();var n={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:e.zIndex};e.enhancedHoverOverlay&&(n.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",n.border="1px solid #949494",n.borderColor=
"rgb(148,148,148)");var f=k("\x3cdiv id\x3d'zoomWindow' /\x3e").css(n);e.fadeMagnifier&&f.fadeIn(200);e.useClickZoom&&(q?f.css("cursor",'url("'+e.zoomOutIcon+'"), auto'):(f.css("cursor","-webkit-zoom-out"),f.css("cursor","-moz-zoom-out"),f.css("cursor","zoom-out")));b.updateImage=function(a){a=k("\x3cimg id\x3d'detailImg' src\x3d'"+a+"'/\x3e").css("position","absolute");b.detailImage&&b.detailImage.remove();f.append(a);k(document).trigger("updated.magnifier");b.detailImage=a;c(b.detailImage)};b.refit=
function(){a();c(b.detailImage);return b};e.fadeMagnifier?(b.show=function(){f.fadeIn(200);return b},b.hide=function(){f.fadeOut(200);return b}):(b.show=function(){f.show();return b},b.hide=function(){f.hide();return b});b.destroy=function(){f.remove();return b};b.getWindowSize=function(){return[b.rect.left,b.rect.top,b.rect.width,b.rect.height]};b.updateImage(N);a();f.appendTo(document.body)},fa=!1,ca,aa=!1,ga;z.preload=function(a){a=k.makeArray(a);for(var c=a.length,b=0;b<c;b++)a[b]instanceof Array?
z.preload(a[b]):"string"===typeof a[b]&&a[b]&&!K[a[b]]&&(K[a[b]]=new Image,K[a[b]].src=a[b])};z.changeImage=function(a,b){G&&m();N=b;d.attr("src",a);z.preload(a);p=[d.position().left,d.position().top,d.width(),d.height()];b&&("immediately"===e.preload?z.preload(b,!0):k(E).ready(function(){z.preload(b)}),c?c.updateImage(b):d.attr("data-old-hires",b))};z.destroy=function(){d.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");B.acEnabled&&d.offsetParent().unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");
k(document).unbind("mousemove.magnifier");n&&n.destroy();n=null;c&&c.destroy();c=null};z.detailImage=function(){return c.detailImage};z.suppressMagnifier=function(a){H=a};z.isEngaged=function(){return G};z.engageMagnifier=g;z.disengageMagnifier=m;d[0].complete?u():d.one("load",u);z.preload(d.attr("src"));if(e.preload){var da=e.detailImageUrl,a=function(){z.preload(da,!0);e.useClickZoom||ia.preload()},T=e.preload;T.constructor!==Array&&(T=[T]);for(var A=0;A<T.length;A++)if("immediately"===T[A])a();
else if(k(E)[T[A]])k(E)[T[A]](a);else k(E).bind(T[A],a)}return z}function d(){if(B.useHoverZoom){var b={adjustment:[0,0,1,1],generalImageUrls:B.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:B.useHoverZoomIpad,useHoverZoom:B.useHoverZoom,useClickZoom:B.useClickZoom,fadeMagnifier:B.fadeMagnifier,zoomOutIcon:B.staticImages.zoomOutCur,enhancedHoverOverlay:B.enhancedHoverOverlay||B.atfEnhancedHoverOverlay};y&&(y.destroy(),y=void 0);var d=H.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");
l.isjQueryObjDefined(d)?B.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",function(f){y=new e(d,b);y.engageMagnifier(f,!0)}),q?d.css("cursor",'url("'+B.staticImages.zoomInCur+'"), auto'):(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):y=new e(d,b):h.isEnabled&&F.logHoverZoomApplicability(k,h)}}var I,B,N,G,y,H,q=navigator.userAgent.match(/msie|trident/i);return function(b,e,f,k){I=this;B=b;N=e;h.refToModel=N;G=k;I.render=function(b,d,
e,f,h,a){H=e;y&&(y.destroy(),y=void 0)};I.update=function(b){};G.register("loadMagnifier",d);G.register("resize",d)}});"use strict";D.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(f,k,l,b){function h(e,f,h){e=(e=h?h:l.getColorFromState(f.getState().hovered_variations,r))&&""!==e?e:r.defaultColor;d.dispatch("updateView",{type:"swatchHover",data:{color:e}});b.postCountMetric("swatchHover")}function F(f,h,k,w){f=(f=w?w:l.getColorFromState(h.getState().selected_variations,
r))&&""!==f?f:r.defaultColor;f===e.getCurrentItem().color?"function"===typeof k&&k():(d.dispatch("updateSelection",{type:"swatchClick",data:{color:f},onload:k}),b.postCountMetric("swatchClick"))}var w,r,e,d;return function(b,k,l,G){w=this;r=b;e=k;d=G;f.on("image-block-twister-swatch-hover",h);f.on("image-block-twister-swatch-click",F);w.render=function(b,d,e,f,h){};w.update=function(b){}}});"use strict";D.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",
function(f,k,l,b,h,F){function w(a,c,d,e){!q.autoplayVideo||U||q.useChromelessVideoPlayer?!b.isjQueryObjDefined(a.find(".a-button-selected"))&&(d=L.getCurrentItem(),!e||q.prioritizeVideos||"chromeless-video"===d.type&&q.autoplayVideo)&&(e=b.getVideoHash(d.color,0,q),-1!==e&&(c+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:e.variant,type:q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=a.find(".item").get(c),b.selectGivenThumbnail(k(c),a))):(b.selectGivenThumbnail(a.find("img:last"),
a),b.fadeToThumbnail(a.find("img").length-1,m,a))}function r(a){var c=L.getCurrentItem().color;if(q.useChildVideos&&!q.colorToVideo[c]){var d=function(){if(a){q.colorToVideo[c]=a;var b={type:"updatedData",data:L.getCurrentItem()};t.dispatch("updateView",b)}};q.lazyLoadExperienceDisabled?d():D.when(b.rankedImagesReadyEvent(q.colorToAsin[c].asin)).execute(function(){d()})}}function e(a){if(!q.useChildVideos)return b.lazyLoadingRequired(L.getCurrentItem(),L,q)?void 0:q.videos;if(q.colorToVideo[a])return q.colorToVideo[a];
var c=q.colorToAsin[a];if(c&&c.asin){var d={};d.params={asin:c.asin,productGroupID:q.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:q.useChromelessVideoPlayer,isUDP:q.isUDP};q.isDPXFeatureEnabled||(d.success=function(a){r(a)},h.load("/gp/product/features/apparel-main-image/videos.html",d));return q.colorToVideo&&q.colorToVideo[a]}}function d(){t.dispatch("selectThumbnail",b.useTabbedImmersiveView(q)?1:0)}function I(a,c,e,g){return l.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:a[0],
streamingUrls:c.url,swfUrl:e.swfUrl,foresterMetadataParams:e.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var c=b.isjQueryObjDefined(a.find("video"))?"HTML5":"FLASH";F.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){a.parent().css("z-index",8)},videounsupported:function(){d();F.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){d();F.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){u.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(c,b,e){c=e.durationSeconds-e.playheadTimeSeconds;a.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){a.parent().css({"background-color":"transparent","z-index":-1});d();k(this).show().css("opacity",1)})}}]})}function B(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var d=b.getVideoHash(c.color,c.index,q);if(-1===d)return-1;if("chromeful-video"===
c.type){c=m.width()/m.height();var e=parseInt(d.videoWidth,10),n=parseInt(d.videoHeight,10);b.updateAspectRatio(c,e,n,x);u?(u.show(),b.loadMediaIntoAiry(u,d,z)):u=b.createAiryInstanceForChromeful(x,d,z,null,q.autoplayVideo,m,J,C);b:if(b.useTabbedImmersiveView(q)){if(1<b.getVideosCount(L.getCurrentItem().color,q)){if(b.isDefined(g)){J.show();break b}g=k('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(q.staticStrings.watchMoreVideos);J.find("#videoCaption").append(g);f.declarative.create(g,
"videoIngressClick",a)}b.playVideoInImmersiveView(q,L.getCurrentItem().color)&&(f.declarative.create(x,"videoIngressClick",a),x.children().css("z-index","-1"),x.css("display","inline-block"))}else J.find("#videoCaption").text(q.staticStrings.playVideo),J.show();d=u;q.autoplayVideo&&d&&!U&&(b.toggleVideoCaption(J),d.setVolume(0),d.show(),d.play(),U=!0)}else u?(u.show(),b.loadMediaIntoAiry(u,d,z),u.play(),J.show()):(u=I(x,d,z))&&u.play()}}function N(c,d,g){var f=e(d);d=c;b.isDefined(f)&&0<f.length&&
q.alwaysIncludeVideo&&c===q.maxAlts&&(C.find(".item:last").remove(),c--);b.isDefined(f)&&(k.each(f,function(d,e){if(c<q.maxAlts){var g=q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",m={type:g,index:d,thumbnailIndex:c,variant:e.variant};a={type:"video-ingress",index:d,thumbnailIndex:c,variant:e.variant};b.useTabbedImmersiveView(q)&&("chromeful-video"===g&&(p+=" videoBlockIngress  videoBlockDarkIngress",e.thumb=e.thumb.replace("_PKmb-play-button-overlay-thumb","")),q.altsOnLeft||(p+=
" a-align-top"));b.createThumbnail(m,e.thumb,C,p);if(b.useTabbedImmersiveView(q)){G(C.find(".videoBlockIngress img"),q.videoIngressATFSlateThumbURL);var m=1<f.length?"multiple-videos":"one-video",h=1<f.length?f.length+" "+q.staticStrings.multipleVideos:q.staticStrings.singleVideo;h&&C.find(".videoBlockIngress").append(C.find("#videoCount_template").clone().text(h).attr("id","videoCount")).addClass(m)}n||(n=!0,F.postCountMetric("chromeless-video"===g?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));
c++}if(b.useTabbedImmersiveView(q))return!1}),w(C,d,c,g));return c}function G(a,c){var b=a.attr("src");if(b&&c){a.attr("src",c);var d=new Image;d.onload=function(c){a.attr("src",b)};d.src=b}}function y(c){u&&u.pause();c.data=a;c.clickTimeStamp=c.$event.timeStamp;var b="a"===c.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";t.dispatch("imageClick",c);F.postTimeMetric("dpcc_vse_videoingressclick",c.$event.timeStamp);F.postCountMetric(b)}var H,q,L,t,C,x,J,m,g,u,z,a,c,n=!1,U=!1,p="videoThumbnail";
return function(d,e,g,n){H=this;q=d;L=e;t=n;z=q.airyConfig;q.colorToVideo={};q.colorToVideo[q.landingAsinColor]=q.colorToVideo[q.defaultColor]=q.videos;H.render=function(a,d,e,g,n,h){C=g;x=n.find("#main-video-container");J=x.parent().find("#video-canvas-caption");m=k("#main-image-container");q.useChromelessVideoPlayer||x.addClass("chromeful-container");c=N(d,a,h);B(L.getCurrentItem());b.useTabbedImmersiveView(q)&&f.declarative("videoIngressClick",["click"],y);return c};H.update=function(d){var e=
d.data;"ingress"!==e.type&&u&&(u.hide(),x.parent().css("z-index",-1),J.hide());if("swatchHover"===d.type)e.color===L.getCurrentItem().color?B(L.getCurrentItem()):d.captured||b.lazyLoadingRequired(e,L,q)&&!b.lazyLoadOnHoverEnabled(q)&&B(L.getCurrentItem());else if("chromeful-video"===e.type||"chromeless-video"===e.type)"mouseenter"===d.type&&F.postCountMetric("dpcc_videoThumbHovered_"+(e.thumbnailIndex+1)+"_"+c),B(e),q.usePeekHover&&"click"!==d.type||(b.selectGivenThumbnail(d.$declarativeParent,C),
"click"===d.type&&b.useTabbedImmersiveView(q)&&(F.postCountMetric("dpcc_videoThumbClicked_"+(e.thumbnailIndex+1)+"_"+c),a.action="videoIngressClick",a.clickTimeStamp=d.$event.timeStamp,t.dispatch("videoIngressClick",a),F.postTimeMetric("dpcc_vse_videoingressclick",d.$event.timeStamp)))};if(q.isDPXFeatureEnabled)f.on("triggerVideoAjax",r)}});"use strict";D.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",
function(f,k,l,b,h,F,w,r,e,d){function I(a){return a.hiRes||a.large||a.main[a.main.length-1]}function B(){v.find("#ivTitle").click(function(){ja.hide()})}function N(){O=Pa?{type:"360-spin"}:V.getCurrentItem()}function G(){var a=v.find("#ivStage"),c=ja.$container.find(".a-popover-wrapper"),b=c.find(".a-popover-inner"),c=c.height()-d.getDimension(b,"padding-top")-d.getDimension(b,"padding-bottom");v.css("height",c);var b=v.find("#ivTitle").outerHeight(!0),e=v.find("#ivVariationSelection").outerHeight(!0),
g=v.find("#ivMediaSelection").outerHeight(!0),n=v.find("#ivThumbs"),f=d.getDimension(n,"margin-top")+d.getDimension(n,"margin-bottom");n.css("height",c-b-e-g-f);v.find("#ivLargeImage").css("height",c);a.css("width",v.width()-d.getDimension(v,"padding-left")-d.getDimension(v,"padding-right")-v.find("#ivThumbColumn").width()-d.getDimension(a,"margin-left")-d.getDimension(a,"margin-right"))}function y(){v.find("#ivMediaSelect").change(function(){var a=b(this).val();"all"===a?(v.find("#ivVideoList").hide(),
v.find("#ivThumbs").show(),v.find(".ivThumbVideo").show(),"chromeful-video"===O.type&&v.find("#ivVideo_"+O.index).click()):"images"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").hide(),"chromeful-video"===O.type&&(0===ba&&0===W?v.find("#iv360").click():0===ba?v.find("#ivHeroImage_0").click():v.find("#ivImage_0").click())):"videos"===a&&(v.find("#ivVideoList").show(),v.find("#ivThumbs").hide(),"chromeful-video"!==O.type?v.find("#ivVideoList_0").click():v.find("#ivVideoList_"+
O.index).click())})}function H(){var a=v.find("#ivStage").find("#ivLargeImage"),c=a.width(),b=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=0===g?1:g,n=Math.min(c/e,b/g),f=g*n,m=e*n;1>n?(Qa?a.css("cursor","url('"+A.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor",
"zoom-in")),Ba=!0):Ba=!1;e=Math.min(m,e);g=Math.min(f-20,g);d.css({"margin-top":(b-g)/2,"margin-left":(c-e)/2,height:g,width:e});a.css("visibility","visible");Ca=!1}function q(a){var c=v.find("#ivLargeImage");c.css("visibility","hidden");c.empty();d.animateStageIn(c);c.append(a);H()}function L(){X&&X.pause();v.find("#ivLarge360").css("display","none");v.find("#ivLargeVideo").css("display","none");v.find("#ivLargeImage").css("display","none");u()}function t(a){L();v.find("#ivLargeImage").css("display",
"block");var c;"hero-image"===a?h.isDefined(ha)&&(c=I(ha[O.index])):h.isDefined(na)&&(c=I(na[O.index]));if(h.isDefined(c)){v.find(".fullscreen").remove();var e=b("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),g=v.find("#ivLargeImage");d.animateStageOut(g,function(){e.load(function(){q(e)});if(e[0].complete)q(e);else{g.empty();var a=(g.height()-104)/2,c=(g.width()-80)/2;b("\x3cimg\x3e").attr("src",A.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(g)}})}}function C(){var a=
parseInt(O.index,10)+1;a>=ma.length||v.find("#ivVideo_"+a).click()}function x(){var a;h.isDefined(ma)&&(a=ma[O.index]);if(h.isDefined(a)){L();var c=v.find("#ivLargeVideo").css("display","block");X?(X.isDetached()&&X.attach(c[0]),h.loadMediaIntoAiry(X,a,ya),X.show()):(X=h.createAiryInstanceForChromeful(c,a,ya,"ImmersiveView"),ya.enableContinuousPlay&&X.bind("ended",C));X.play({isAsync:!0})}}function J(){N();var a;a="hero-image"===O.type?v.find("#ivHeroImage_"+O.index):"image"===O.type?v.find("#ivImage_"+
O.index):"chromeful-video"===O.type||"chromeless-video"===O.type?v.find("#ivVideo_"+O.index):"360-spin"===O.type?v.find("#iv360"):h.isDefined(ha)?v.find("#ivHeroImage_"+O.index):v.find("#ivImage_"+O.index);h.isjQueryObjDefined(a)||(a=v.find("#ivImage_0"));m(a)}function m(a){v.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(O.type="chromeful-video",O.index=a.attr("id").split("_")[1],x()):a.hasClass("ivHeroImage")?(O.type="hero-image",O.index=a.attr("id").split("_")[1],
t(O.type)):a.hasClass("iv360Image")?(O.type="360-spin",O.index=0,g()):(O.type="image",O.index=a.attr("id").split("_")[1],t(O.type))}function g(){L();v.find("#ivLarge360").css("display","block");U();var c=v.find("#ivLarge360");c.css({opacity:0});setTimeout(function(){c.css({opacity:.4});d.animateStageIn(c)},200);a();w.postCountMetric("dppc_click360");ua=Date.now()}function u(){0<ua&&(z("dppc_duration360",Date.now()-ua),ua=0)}function z(a,c){E.ue&&E.ue.count(a,c)}function a(){if(0<ra){var a=v.find(".iv360Hint");
a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function c(d,e){if(ra<d.length){var g=b("\x3cimg /\x3e").css({display:"block",width:6*oa+"px",height:va+"px"});g.hide();e.append(g);g.get(0).onload=function(){e.closest(document.documentElement).length&&(ra++,1===ra&&(a(),0<ua&&z("dppc_loadTime360",Date.now()-ua)),0<Ia&&z("dppc_perSpriteloadTime360",Date.now()-Ia),v.find("#iv360Spinner").hide(),g.show(),za=5*R.imageLocations[Math.floor(Aa/R.imageLocations[0].length)][Aa%R.imageLocations[0].length],
c(d,e))};g.attr("src",d[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+wa+"$2"+xa));Ia=Date.now()}}function n(a){if(h.isDefined(R.spriteWidthSizes)&&0<R.spriteWidthSizes.length){var c=R.spriteWidthSizes,b=c.length,d=c[0],e=c[b-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<b;d++)if(a>c[d]&&a<=c[d+1])return c[d+1]}else return a}function U(){var a=v.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),
height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",A.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ja=!0,p())}function p(){if(h.isDefined(R.spriteURLs)&&h.isDefined(v)&&Ja&&!Ka){var a=v.find("#ivLarge360"),d=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});h.isDefined(R.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",R.staticImages.hint360).appendTo(d);b("\x3cdiv\x3e").css({"text-align":"center"}).text(A.staticStrings.dragToSpin).appendTo(d);d.appendTo(a);var d=R.imageWidth,e=R.imageHeight,g=a.parent().width(),f=a.parent().height(),m=0,p=0;d/e>g/f?(wa=n(g),xa=Math.round(e/d*wa),oa=Math.ceil(g),va=Math.ceil(xa/wa*g),p=(f-va)/2):(xa=
n(f),wa=Math.round(d/e*xa),va=Math.ceil(f),oa=Math.ceil(wa/xa*f),m=(g-oa)/2);a.css({"margin-left":m,"margin-top":p,width:oa+"px",height:va+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*oa+"px");c(R.spriteURLs,v.find("#image-360-sprites"),0);d=v.find("#ivLarge360");d.bind("mousedown",S);d.bind("touchstart",D);d.bind("touchmove",K);d.bind("touchend",M);b(document).bind("mousemove",Y);b(document).bind("mouseup",Q);h.isDefined(A.staticImages.grab)&&a.css("cursor",
"url('"+A.staticImages.grab+"'), auto");Ka=!0}}function D(a){Da=!0;La=a.originalEvent.targetTouches[0].clientX}function K(a){Da&&(Z(a.originalEvent.targetTouches[0].clientX-La),La=a.originalEvent.targetTouches[0].clientX)}function M(a){Da&&(Da=!1)}function S(a){Ea=!0;Ma=a.originalEvent.clientX;h.isDefined(A.staticImages.grabbing)&&(a=v.find("#ivLarge360"),a.css("cursor","url('"+A.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+A.staticImages.grabbing+"'), auto"));
return!1}function Y(a){Ea&&(Z(a.originalEvent.clientX-Ma),Ma=a.originalEvent.clientX)}function Q(a){Ea&&(Ea=!1,h.isDefined(A.staticImages.grab)&&(a=v.find("#ivLarge360"),a.css("cursor","url('"+A.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function Z(a){for(a=za-=a/oa*180;0>a;)a+=360;for(;360<a;)a-=360;za=a;var c;a=360;for(var b=0;b<ra;b++)for(var d=0;d<R.imageLocations[b].length;d++){var e=Math.abs(za-5*R.imageLocations[b][d]);e<a&&(a=e,c=b*R.imageLocations[0].length+
d)}c!==Aa&&(a=Math.floor(c/R.imageLocations[0].length),a!==Math.floor(Aa/R.imageLocations[0].length)&&(h.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),b=v.find("#image-360-sprites").children(),Na.drawImage(b[a],0,0)),a=v.find(".iv360Hint").not(".iv360HintFaded"),h.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Aa=c;a=c%R.imageLocations[0].length*-1*oa;c=-1*Math.floor(c/R.imageLocations[0].length)*va;b=v.find("#ivLarge360").children("#image-360-sprites");
b.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");b.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function ea(){v.delegate(".ivThumb","click",function(){var a=b(this);m(a)});v.delegate(".ivThumbVideoListOuter","click",function(){v.find(".ivThumbVideoListOuter").removeClass("selected");var a=b(this);a.addClass("selected");O.type="chromeful-video";O.index=a.attr("id").split("_")[1];x()})}function ia(){X&&!X.isDetached()&&(ya.volume=X.getVolume(),X.detach(),!document.all||E.atob||document.addEventListener||
(X=null));v.find("#ivLargeImage").empty();u()}function la(a,c){return 0<c?c/2:Math.min(0,Math.max(c,a))}function fa(a){var c=sa.left-(a.pageX-Fa[0])*Ga;f.capabilities.rtl&&(c=sa.left-(b(E).width()-a.pageX-Fa[0])*Ga);a=sa.top-(a.pageY-Fa[1])*Ga;c=la(c,Ha.left);a=la(a,Ha.top);v.find(".fullscreen").css({left:c,top:a})}function ca(){v.delegate("#ivLargeImage","click",function(a){if(Ca)H();else if(Ba){v.find(".fullscreen").removeAttr("style");if(Ba){var c=v.find("#ivLargeImage"),b=c.find(".fullscreen");
Qa?c.css("cursor","url('"+A.staticImages.zoomOut+"'), auto"):(c.css("cursor","-webkit-zoom-out"),c.css("cursor","-moz-zoom-out"),c.css("cursor","zoom-out"));Ca=!0;var d=v.find("#ivLargeImage");Ha.left=d.width()-b.width();Ha.top=d.height()-b.height();var d=c.height()/2,e=c.width()/2;Fa=[c.offset().left+e,c.offset().top+d];sa.top=d-b.height()/2;sa.left=e-b.width()/2;b.css({position:"relative",left:sa.left,top:sa.top});Ga=Math.max(b.height()/c.height(),b.width()/c.width())}fa(a)}});v.delegate("#ivLargeImage",
"mousemove",function(a){Ca&&fa(a)})}function aa(a){if(h.isImmersiveViewEnabled(A,V.getCurrentItem().color)){Pa=h.isDefined(a)&&"button-360-click"===a.action;r.isEnabled&&e.logImmersiveViewRequestServed(r);w.postCountMetric("dppc_immersiveViewOpened");if(h.isDefined(ja))ja.show();else{a=b("#auiImmersiveViewDiv");var c=b(E).height()-150,g=b(E).width()-75;ja=k.create(a,{name:"immersiveView",activate:"onclick",width:g,height:c,popoverLabel:"ImmersiveView",hideHeader:!0});a.click()}if(Oa){v=b("#ivMain");
a=V.getCurrentItem().color;na=A.colorImages[a];ha=A.heroImage[a];ma=A.useChildVideos?A.colorToVideo[a]:A.videos;ta=da()&&A.spin360ColorEnabled[a];R=da()?A.spin360ColorData[a]:void 0;N();ka=W=qa=ba=0;h.isDefined(ha)&&(W=ha.length);h.isDefined(na)&&(ba=na.length);h.isDefined(ma)&&(qa=ma.length);ta&&(ka=1);d.populateTitle(v.find("#ivTitle"),45,A);d.populateVariationSelection(v.find("#ivVariationSelection"));a=v.find("#ivMediaSelect");0===ba+ka||0===qa?(a.parent().hide(),v.find("#ivThumbs").addClass("noMediaSelection")):
(a.empty(),b("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(A.staticStrings.allMedia+" ("+(W+ba+ka+qa)+")").appendTo(a),b("\x3coption/\x3e").attr("value","images").text(A.staticStrings.images+" ("+(W+ba+ka)+")").appendTo(a),b("\x3coption/\x3e").attr("value","videos").text(A.staticStrings.videos+" ("+qa+")").appendTo(a),a.parent().show(),a.val("all"));a=v.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var c=W+ba+qa+ka,n=g=0;g<c;)for(var m=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),
p=0;3>p&&g<c;p++,g++,n++)if(n<W){var u=ha[g].thumb,x=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(m);x.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(u)+'") center no-repeat')}else if(n>=W&&n<ba+W)u=na[g-W].thumb,x=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-W)).appendTo(m),x.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(u)+
'") center no-repeat');else if(n>=W+ba&&n<ba+W+ka)x=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(m),x.find(".ivThumbImage").css("background",'url("'+(h.isDefined(A.staticImages.icon360)?d.getResizedThumbnailURL(A.staticImages.icon360,!0):"")+'") center no-repeat');else if(u=ma[g-ba-W-ka],x=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(g-ba-W-ka)).appendTo(m),x.find(".ivThumbImage").css("background",
'url("'+u.thumbUrl+'") center no-repeat'),h.isDefined(u)){var q={position:"triggerTop"},l=v.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");l.find(".ivVideoPopoverTitle").text(u.title);l.find(".ivVideoPopoverDuration").text(u.durationTimestamp);q.inlineContent=l[0];f.declarative.create(x,"a-tooltip",q)}a=v.find("#ivVideoList");a.find(".ivThumbVideoListOuter").not(".placeholder").remove();c=a.find(".placeholder");for(g=0;g<qa;g++)n=ma[g],m=c.clone().removeClass("placeholder").appendTo(a),
m.attr("id","ivVideoList_"+g),m.find(".ivThumbImage").css("background",'url("'+n.thumbUrl+'") center no-repeat'),m.find(".ivThumbTitle").text(n.title),m.find(".ivThumbDuration").text(n.durationTimestamp);v.find("#ivLarge360").empty();ra=0;Ka=Ja=!1;ya=A.airyConfig;Oa=!1;Ra()}}}function ga(a){var c=A.colorToAsin[a],b={},d=500;if(c&&c.asin){b.params={asin:c.asin};var e="360"+c.asin,g=Date.now();b.success=function(c){z("dppc_asyncRequestTime360",Date.now()-g);c&&h.isDefined(c.spin360.spin360Model)?(h.ajaxState(e,
"success"),A.spin360ColorData[a]=c.spin360.spin360Model,a===V.getCurrentItem().color&&(R=A.spin360ColorData[a],p())):b.error()};b.error=function(){w.postCountMetric("dppc_asyncFailed360");z("dppc_asyncRequestTime360",Date.now()-g);d*=2;16E3>=d?setTimeout(function(){g=Date.now();F.load("/gp/product/features/apparel-main-image/360.html",b)},d):h.ajaxState(e,"fail")};h.ajaxState(e)&&"fail"!==h.ajaxState(e)||(F.load("/gp/product/features/apparel-main-image/360.html",b),h.ajaxState(e,"sent"))}}function da(){return h.isDefined(A.spin360ConfigEnabled)&&
A.spin360ConfigEnabled}var T,A,V,pa,ja,v,ha,na,ma,W,ba,qa,ka,O,X,ya,R,ta,oa,va,xa,wa,Ma,La,Pa=!1,Ja=!1,Ka=!1,za=0,Aa=0,ua=0,Ia=0,Ea=!1,Da=!1,ra=0,Na,Qa=navigator.userAgent.match(/msie|trident/i),Oa=!0,Ca=!1,Ba=!1,Ha={},sa={},Ga,Fa,Ra=f.once(function(){y();ea();ca();f.on("a:popover:afterUpdatePosition:immersiveView",G);f.on("a:popover:afterShow:immersiveView",J);f.on("a:popover:afterHide:immersiveView",ia);B()});return function(a,c,e,g){T=this;A=a;V=c;r.refToModel=V;pa=g;da()&&(A.spin360ColorData[A.landingAsinColor]=
A.spin360ColorData[A.defaultColor],A.spin360ColorEnabled[A.landingAsinColor]=A.spin360ColorEnabled[A.defaultColor]);h.isDefined(A.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",d.addStyleCodeToURL(A.staticImages.icon360,"_FMpng_RI_"));T.render=function(a,c,b,d,e,g){Oa=!0;da()&&A.spin360ColorEnabled[a]&&!h.isDefined(A.spin360ColorData[a])&&(A.spin360ColorData[a]={},ga(a));h.isImmersiveViewEnabled(A,V.getCurrentItem().color)&&da()&&A.spin360ColorEnabled[a]&&
(c===A.maxAlts&&(a=d.find(".item.imageThumbnail"),b=d.find(".item.videoThumbnail"),h.isDefined(b)&&1<b.length?b.last().remove():a.last().remove(),c--),a=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(a,"button-360-click"),d.append(a),c++,w.postCountMetric("dppc_display360"));return c};T.update=function(a){};pa.register("imageClick",aa);pa.register("button360Click",aa)}});"use strict";D.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(f,k,l,b,h,F,w,r,e,d){function I(){var e=H.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),g=e.find(".a-popover-inner"),e=e.height()-d.getDimension(g,"padding-top")-d.getDimension(g,"padding-bottom");b("#iv-tab-view-container").css("height",e);t=b("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==
b(this).css("display")}).length;1<t?(b("#iv-tab-view-container ul.iv-tab-views li").parent().show(),g=b("#iv-tab-view-container ul.iv-tab-views li").parent().height(),e-=g):b("#iv-tab-view-container ul.iv-tab-views li").parent().hide();b("#iv-tab-view-container .iv-tab-content").css("height",e);f.trigger("dp:image-block:immersive-view:resize")}function B(){f.trigger("dp:image-block:immersive-view:reset")}function N(d){if(h.isImmersiveViewEnabled(y,H.getCurrentItem().color)){r.isEnabled&&e.logImmersiveViewRequestServed(r);
w.postCountMetric("dppc_immersiveViewOpened");h.isDefined(d)&&("button-360-click"===d.action?b("#iv360TabHeading").click():"videoIngressClick"===d.action?(C=d.clickTimeStamp,b("#ivVideosTabHeading").click()):b("#ivImagesTabHeading").click());var g=H.getImmersiveViewModalInstance();if(h.isDefined(g))g.show();else{d=b("#auiImmersiveViewDiv");var g=Math.min(Math.max(b(E).height()-150,540),1080),u=Math.min(Math.max(b(E).width()-75,990),1980),g=k.create(d,{name:"immersiveView",activate:"onclick",width:u,
height:g,popoverLabel:"ImmersiveView",hideHeader:!0});H.setImmersiveViewModalInstance(g);d.click()}L&&(L=!1,x(),f.trigger("dp:image-block:immersive-view:init"))}}var G,y,H,q,L=!0,t=0,C,x=f.once(function(){f.on("a:popover:afterUpdatePosition:immersiveView",I);f.on("a:popover:afterShow:immersiveView",I);f.on("a:popover:afterHide:immersiveView",B)}),J=f.once(function(){var d=b("#iv-tab-view-container ul.iv-tab-views li");d.bind("click",function(e){var h=d.filter(".iv-active");h.attr("id")!==b(this).attr("id")&&
f.trigger("dp:ivTabs:"+h.find("a").attr("data-iv-tab-view")+":deselect",e);d.removeClass("iv-active");b(this).addClass("iv-active");b("#iv-tab-view-container .iv-tab-content").hide();h=b(this).find("a").attr("data-iv-tab-view");b("#"+h).show();"ivVideosTab"===h&&(e.clickTimeStamp=C||e.timeStamp);f.trigger("dp:ivTabs:"+h+":select",e);w.postCountMetric("dppc_"+h);return!1})});return function(b,d,e,f){G=this;y=b;H=d;r.refToModel=H;q=f;G.render=function(a,c,b,d,e,g){w.postCountMetric("dpcc_altThumbs_"+
c);L=!0};G.update=function(a){};G.getTitle=function(){};G.getVariationSelectionInfo=function(){};J();q.register("imageClick",N);q.register("button360Click",N);h.useTabbedImmersiveView(y)&&q.register("videoIngressClick",N)}});"use strict";D.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(f,k,l){return{load:function(b,h){h=h||{};h.timeout=h.timeout||4E3;f.ajax(b,h)}}});"use strict";D.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric",
"postEarlyMetric").register("imageBlockUtils",function(f,k,l,b,h,F,w,r){function e(a){return null!==a&&"undefined"!==typeof a}function d(a){var c=0;k.each(a,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function I(a){var c=0;k.each(a,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function B(a,c,b){c=c.width();if(b.naturalMainImageSize)return c;a=d(a);0<a&&(c=Math.min(c,a));return c}function N(a,c,b){c=c.height();if(b.naturalMainImageSize)return c;a=I(a);0<a&&(c=Math.min(c,
a));return c}function G(a){var c;k.each(a,function(a,b){e(c)||(c=b[1]/b[0])});return c||1}function y(a,c,b){c.fadeTo(500,0,function(){q(a,b);c.fadeTo(500,1)})}function H(a){a&&a.toggle()}function q(a,c){var b=c.find("img");e(b[a])&&k(b[a]).click()}function L(a,c){z[a]=c?c:z[a];return z[a]}function t(a,c,b){b=b||u;b=b.colorImages;if(1>b.length||!e(b[a])||!e(c))return-1;var d=-1;k.each(b[a],function(a,b){b.variant===c&&(d=a)});return d}function C(a,c,b){b=b||u;b=b.colorImages;return!(e(b)&&e(b[a])&&
e(b[a][c])&&e(b[a][c].main))||1>k.map(b[a][c].main,function(a,c){return c}).length?-1:b[a][c]}function x(a,c,b,d){d.parent().css("z-index",2);0!==b&&0!==c&&(c/=b,a>c?d.css("width",c/a*100+"%"):d.css("height",a/c*100+"%"))}function J(a,c){var b;if(b=a.useIV)b=a.colorImages&&a.colorImages[c]&&0<a.colorImages[c].length?!0:!1;w.isEnabled&&(w.IVApplicaple=b,r.logImmersiveViewApplicability(k,w));return b}var m,g,u=k.extend(!0,{},h,F),z={};return{isDefined:e,isDefinedAndEmpty:function(a){return e(a)&&"object"===
typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return e(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return e(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:G,getMaxHeightOfMainImage:N,getMaxWidthOfMainImage:B,getMaxDimensionsOfMainImage:function(a,c,b){var d=N(a,c,b);c=B(a,c,b);a=G(a);b=c/a;c=Math.min(c,d*a);d=Math.min(d,b);return[d,c]},getContainerHeight:function(a,
c,b){var d=a.get(0);a=0;if(e(d)){a=d.offsetWidth/c;a=Math.min(a,b);var g;c=u.mainImageHeightPartitions;b=u.mainImageMaxSizes;if(e(b)&&e(c)){for(var f=0,h=E.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<c.length;d++)h>c[d]&&(f=d+1);b.length>=f&&(g=b[f])}e(g)&&(a=Math.min(g[1],a))}return a},getColorFromState:function(a,c){if(a){c=c||u;var b="";k.each(c.visualDimensions,function(c,d){a[d]&&(b+=" "+a[d])});return b&&b.substring(1)}},createThumbnail:function(a,c,
b,d){var g=b.find(".template").clone().removeClass("template").addClass("item"),h=document.createElement("img");h.src=c;g.find(".placeHolder").replaceWith(h);(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&g.addClass("heroImageThumbnail");e(d)&&g.addClass(d);f.declarative.create(g,"thumb-action",a);b.append(g)},selectGivenThumbnail:function(a,c){var b=a.find(".a-button");c.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");b.addClass("a-button-selected").addClass("a-button-focus")},
createAiryInstanceForChromeful:function(a,c,d,e,f,h,x,u){var q=k.extend({},d.foresterMetadataParams);null!==e&&(q.method+="."+e);var r=[];c.disabledViewIds&&(r=c.disabledViewIds);return l.embed({parentElement:a[0],streamingUrls:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,swfUrl:d.swfUrl,foresterMetadataParams:q,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:c.slateUrl,postMediaSlate:c.slateUrl},videoAds:d.videoAds,
bindings:{play:function(){"ImmersiveView"===e?m||(m=!0,b.postCountMetric("dppc_chromefulVideoPlayedIV")):g||(g=!0,b.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,c,b){f&&(y(0,h,u),H(x))}}],disabledViewIds:r})},loadMediaIntoAiry:function(a,c,b){a&&a.getMediaSourceInfo()!==c.url&&a.loadMedia({mediaSourceInfo:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,slateImages:{preloadSlate:c.slateUrl,
postMediaSlate:c.slateUrl}})},showUnavailable:function(a){a&&(k("#imageBlock .unvailableVariation").html(a),k("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){k("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:y,toggleVideoCaption:H,selectThumbnail:q,spinner:function(a,c){var b=k("#imageBlock .a-spinner").parent();0===b.length&&(b=k("\x3cdiv\x3e\x3c/div\x3e").append(k("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(b),b.css({position:"absolute",
left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?b.show():b.hide();return b},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:L,getIndexForVariant:t,getImageHash:C,lazyLoadingRequired:function(a,c,b){c=Math.max(t(a.color,c.getCurrentItem().variant,b),0);
c=-1!==C(a.color,c,b);a=b.colorToAsin[a.color]&&b.colorToAsin[a.color].asin;a=!a||"success"!==L(a);return!b.lazyLoadExperienceDisabled&&!c&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:x,repositionVideoBanner:function(a,c,b,d){setTimeout(function(){var b=a.width()/a.height();x(b,16,9,c)},d||0)},getVideosCount:function(a,c){return c.useChildVideos&&c.colorToVideo[a]?c.colorToVideo[a].length:c.videos?c.videos.length:0},getVideoHash:function(a,c,
b){if(b.useChildVideos){if(!e(b.colorToVideo))return-1;a=b.colorToVideo[a]}else a=b.videos;return e(a)&&e(a[c])&&e(a[c].url)?a[c]:-1},isImmersiveViewEnabled:J,playVideoInImmersiveView:function(a,c){return J(a,c)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView}}});"use strict";D.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(f,k,l,b,h){function F(d,e,f,g){if(!l.isjQueryObjDefined(d.find(".a-button-selected"))){var h=
H.getCurrentItem();if(!g||"chromeless-video"!==h.type||!y.autoplayVideo){g=0;if("hero-image"===h.type){g=r(h.color,h.variant);if(-1===g)return;g=-1!==g?g:0}var w=e+g;w>=f&&(g=0,w=e);e=b.getHeroImageHash(y,h.color,g);-1!==e&&(q.dispatch("updateModel",{data:{index:g,thumbnailIndex:w,variant:e.variant,type:"hero-image"}}),e=d.find(".item").get(w),l.selectGivenThumbnail(k(e),d))}}}function w(b,d,e){if("hero-video"===H.getCurrentItem().type)return b;d=y.heroImage&&y.heroImage[d];var g=b;l.isDefined(d)&&
(k.each(d,function(d,e){b<y.maxAlts&&(l.createThumbnail({type:"hero-image",index:d,thumbnailIndex:b,variant:e.variant},e.thumb,L,"imageThumbnail"),b++)}),F(L,g,b,e));return b}function r(b,d){var e=y.heroImage;if(1>e.length||!l.isDefined(e[b])||!l.isDefined(d))return-1;var g=-1;k.each(e[b],function(b,e){e.variant===d&&(g=b)});return g}function e(){if(t.length&&y.repositionHeroImage){var d=b.getHeroDimParams(y,H.getCurrentItem()),e;l.isDefined(d)&&(e=l.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+
d.yPos+"px ",t.css({"background-position":e,"background-size":d.width+"px "+d.height+"px ","max-width":d.width+"px ","min-height":d.height+"px ",filter:"","-ms-filter":""}))}}function d(d,e,f,g){if(t.length&&d&&e){if("function"===typeof f||g){var h=new Image;h.onload=g?function(){t.css("background-image",'url("'+d+'")')}:f;h.src=d}f=e[1];var h=e[0],k;g||t.css({"background-image":'url("'+d+'")'});y.repositionHeroImage&&(e=b.getHeroDimParams(y,H.getCurrentItem(),e),l.isDefined(e)&&(f=e.width,h=e.height,
k=l.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+"px "));t.css({"background-position":k,"background-size":f+"px "+h+"px ","max-width":f+"px ","min-height":h+"px ",filter:"","-ms-filter":""})}}function I(e,f,h,g){e=b.getHeroImageHash(y,e,f);if(-1===e)return-1;f=k.map(e.main,function(b,d){return d})[0];d(f,e.main[f],h,g)}function B(d,e,f){if("hero-image"!==d.type)return-1;var g=r(d.color,H.getCurrentItem().variant),g=-1!==g?g:0;if(-1===b.getHeroImageHash(y,d.color,g))return-1;var h=
H.getCurrentItem();d.thumbnailIndex=h.thumbnailIndex;d.type=h.type;d.variant=h.variant;d.index=g;N(d,e,f)}function N(d,e,h){var g=b.getHeroImageHash(y,d.color,d.index),k;k=d&&C&&f.equals(d,C)?!0:!1;C||(C=d);if(!k&&d||e)I(d.color,d.index,e,h),C=d;t.removeClass("hide-background");f.trigger("dp:image-block:update",g)}var G,y,H,q,L,t,C={};return function(b,d,f,g){G=this;y=b;H=d;q=g;y.heroImage[y.landingAsinColor]=y.heroImage[y.defaultColor];G.render=function(b,d,a,c,e,g,f){L=c;t=k("#heroImage");b=w(d,
b,g);B(H.getCurrentItem(),f,g);return b};G.update=function(b){var d=b.data;"ingress"!==d.type&&t.addClass("hide-background");"swatchHover"===b.type?b.captured||(d.type=H.getCurrentItem().type,-1!==B(d)&&(b.captured=!0)):"hero-image"===d.type&&(N(d),"click"!==b.type&&y.usePeekHover||l.selectGivenThumbnail(b.$declarativeParent,L))};q.register("resize",e)}});"use strict";D.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(f,k,
l,b,h){var F,w,r,e;return function(b,h,k,N){F=this;w=b;r=N;F.render=function(b,d,h,k,r,t,B){e=k;F=this;h=w.maxAlts;k=d;r=w.colorImages[b]?w.colorImages[b].length:0;r+=l.getVideosCount(b,w);b=w.heroImage[b];t=0;b&&(t=b.length);b=r+t;b>h&&(h=b-h,b=e.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),h+="+",k={type:"ingress",index:0,thumbnailIndex:d,variant:""},b.find("#altIngressText").append(h),f.declarative.create(b,"thumb-action",k),e.append(b),
k=d++);return k};F.update=function(b){"ingress"===b.data.type&&"click"===b.type&&r.dispatch("imageClick",b)}}});"use strict";D.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(f,k,l){return function(b,f,k){this.getImageHash=function(f){var h=k.getCurrentItem();f=l.getIndexForVariant(h.color,f||"MAIN",b);return l.getImageHash(h.color,f,b)};this.onImageUpdateForTwister=function(b){f.register("updateSelection",function(f){"swatchClick"===f.type&&"function"===typeof b&&b()})}}});
"use strict";D.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(f,k,l){function b(b,f){var e;if(f.repositionHeroImage){e=b[1];var d=b[0];if(768>=(E.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))e*=.7,d*=.7;else{var h=((E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);e*=.7+.3*h;d*=.7+.3*h}e=[e,d]}return e}function h(b,f,e){var d;if(e.repositionHeroImage){var h=E.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth;e=e.heroFocalPoint;if(l.isDefined(e)){d=Math.max((h-Math.min(1500,b))/2,0);var k=Math.max((h-b)/2,0);d-=k;h=Math.max(Math.min(h,1500),1024);d=d+(h-420-23)/2-b/f[1]*e}}return d}function F(b,f,e){b=b.heroImage;return!(l.isDefined(b)&&l.isDefined(b[f])&&l.isDefined(b[f][e])&&l.isDefined(b[f][e].main))||1>k.map(b[f][e].main,function(b,e){return e}).length?-1:b[f][e]}return{getHeroImageHash:F,getHeroDimParams:function(f,r,e){if(f.repositionHeroImage){if(!l.isDefined(e)){e=
F(f,r.color,r.index);if(-1===e)return;r=k.map(e.main,function(b,e){return e})[0];e=e.main[r]}r=b(e,f);f=h(r[0],e,f);return{height:r[1],width:r[0],xPos:f,yPos:75}}}}});"use strict";D.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(f,k,l,b,h,F,w){function r(b,e){var h=f.copy(b);if(w.isDefined(b)&&b.length>e){try{for(var k=-1,l=0;l<b.length;l++){var r=b.charAt(l);if(" "===r||"."===r||"?"===r||";"===r||","===r||
":"===r)k=l;if(l===e-4){h=b.substring(0,-1===k?l:k);break}}}catch(H){h=b.substring(0,e-3)}h+="..."}return h}function e(b,e){var f=b.lastIndexOf(".");return b="_"===b.charAt(f-1)?b.substring(0,f-1)+e+b.substring(f):b.substring(0,f)+"."+e+b.substring(f)}return{getDimension:function(b,e){var f=parseInt(b.css(e),10);return isNaN(f)?0:f},attachTabSelectHandler:function(b,e){f.on("dp:ivTabs:"+b+":select",e)},attachTabDeselectHandler:function(b,e){f.on("dp:ivTabs:"+b+":deselect",e)},attachImmersiveViewResizeHandler:function(b){f.on("dp:image-block:immersive-view:resize",
b)},detachImmersiveViewResizeHandler:function(b){f.off("dp:image-block:immersive-view:resize",b)},attachImmersiveViewResetHandler:function(b){f.on("a:popover:afterHide:immersiveView",b)},hideTabHeading:function(b){k("#"+b).hide()},unhideTabHeading:function(b){k("#"+b).show()},addStyleCodeToURL:e,getResizedThumbnailURL:function(b,f){b=b.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");b=b.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");b=
b.replace(/\._CB\d+_SS\d+_/,"");var h="_AA50_";f&&(h+="FMpng_RI_");return e(b,h)},populateVariationSelection:function(b){if(w.isDefined(E.DetailPage)&&w.isDefined(E.DetailPage.StateController)){b.empty();var e=E.DetailPage.StateController.getState(),f=e.variation_label_order,h;for(h in f)if(f.hasOwnProperty(h)){var l=f[h],r=e.selected_variations[l],l=e.variation_display_labels[l];r&&k("\x3cdiv/\x3e").addClass("ivVariations").text(l+":"+r).appendTo(b)}}},populateTitle:function(b,e,f){b.attr("title",
f.title);b.text(r(f.title,e))},animateStageIn:function(b){b.animate({opacity:1},200)},animateStageOut:function(b,e){b.animate({opacity:.4},100,e)},logError:function(b,e,f,h){E.ueLogError&&E.ueLogError(h,{logLevel:b,attribution:e,message:f})}}});"use strict";D.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(f,k,l,b,h,F,w,r){function e(){var b=m.getCurrentItem().color;z=J.colorImages[b];
u=J.heroImage[b];a=c=0;h.isDefined(u)&&(a=u.length);h.isDefined(z)&&(c=z.length)}function d(b){return b.hiRes||b.large||b.main[b.main.length-1]}function I(){var b=g.find("#ivStage").find("#ivLargeImage"),a=b.width(),c=b.height(),d=b.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));b.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(a/e,c/f),k=f*h,m=e*h;1>h?(D?b.css("cursor",
"url('"+J.staticImages.zoomIn+"'), auto"):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in")),K=!0):K=!1;e=Math.min(m,e);f=Math.min(k-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(a-e)/2,height:f,width:e});b.css("visibility","visible");P=!1}function B(b){var a=g.find("#ivLargeImage");a.css("visibility","hidden");a.empty();r.animateStageIn(a);a.append(b);I()}function E(a){g.find("#ivLargeImage").css("display","none");g.find("#ivLargeImage").css("display",
"block");var c;"hero-image"===a?h.isDefined(u)&&(c=d(u[n.index])):h.isDefined(z)&&(c=d(z[n.index]));if(h.isDefined(c)){g.find(".fullscreen").remove();var e=b("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),f=g.find("#ivLargeImage");r.animateStageOut(f,function(){e.load(function(){B(e)});if(e[0].complete)B(e);else{f.empty();var a=(f.height()-104)/2,c=(f.width()-80)/2;b("\x3cimg\x3e").attr("src",J.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(f)}})}}function G(b){g.find(".ivThumb").removeClass("selected");
b.addClass("selected");b.hasClass("ivHeroImage")?n.type="hero-image":n.type="image";n.index=b.attr("id").split("_")[1];E(n.type);w.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(n.index,10)+1)+"_"+(a+c))}function y(){g.delegate(".ivThumb","click",function(){var a=b(this);G(a)})}function H(b,a){return 0<a?a/2:Math.min(0,Math.max(a,b))}function q(b){var a=S.top-(b.pageY-Q[1])*Y;b=H(S.left-(b.pageX-Q[0])*Y,M.left);a=H(a,M.top);g.find(".fullscreen").css({left:b,top:a})}function L(){g.delegate("#ivLargeImage",
"click",function(b){if(P)I();else if(K){g.find(".fullscreen").removeAttr("style");if(K){var a=g.find("#ivLargeImage"),c=a.find(".fullscreen");D?a.css("cursor","url('"+J.staticImages.zoomOut+"'), auto"):(a.css("cursor","-webkit-zoom-out"),a.css("cursor","-moz-zoom-out"),a.css("cursor","zoom-out"));P=!0;var d=g.find("#ivLargeImage");M.left=d.width()-c.width();M.top=d.height()-c.height();var d=a.height()/2,e=a.width()/2;Q=[a.offset().left+e,a.offset().top+d];S.top=d-c.height()/2;S.left=e-c.width()/2;
c.css({position:"relative",left:S.left,top:S.top});Y=Math.max(c.height()/a.height(),c.width()/a.width())}q(b);w.postCountMetric("dpcc_iv_largeImageCLick")}});g.delegate("#ivLargeImage","mousemove",function(b){P&&q(b)})}function t(){g.find("#ivLargeImage").empty()}function C(d){if(p){g=b("#ivMain");e();n=m.getCurrentItem();r.populateTitle(g.find("#ivTitle"),160,J);r.populateVariationSelection(g.find("#ivVariationSelection"));d=g.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();for(var f=
a+c,k=0,l=0;k<f;)for(var q=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),t=0;4>t&&k<f;t++,k++,l++)if(l<a){var y=u[k].thumb,w=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+k).appendTo(q);w.find(".ivThumbImage").css("background",'url("'+r.getResizedThumbnailURL(y)+'") center no-repeat')}else l>=a&&l<c+a&&(y=z[k-a].thumb,w=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(k-a)).appendTo(q),w.find(".ivThumbImage").css("background",'url("'+r.getResizedThumbnailURL(y)+'") center no-repeat'));Z();p=!1}d=b("#ivImagesTab").height();g.css("height",d);f=g.find("#ivTitle").outerHeight(!0);k=g.find("#ivVariationSelection").outerHeight(!0);l=g.find("#ivThumbs");q=r.getDimension(l,"margin-top")+r.getDimension(l,"margin-bottom");l.css("height",d-f-k-q);g.find("#ivLargeImage").css("height",d);d=g.find("#ivStage");f=g[0]&&g[0].getBoundingClientRect&&Math.floor(g[0].getBoundingClientRect().width)||
g.width();d.css("width",f-r.getDimension(g,"padding-left")-r.getDimension(g,"padding-right")-g.find("#ivThumbColumn").width()-r.getDimension(d,"margin-left")-r.getDimension(d,"margin-right"));n=m.getCurrentItem();d="hero-image"===n.type?g.find("#ivHeroImage_"+n.index):"image"===n.type?g.find("#ivImage_"+n.index):h.isDefined(u)?g.find("#ivHeroImage_"+n.index):g.find("#ivImage_"+n.index);h.isjQueryObjDefined(d)||(d=g.find("#ivImage_0"));G(d)}var x,J,m,g,u,z,a,c,n,D=navigator.userAgent.match(/msie|trident/i),
p=!0,P=!1,K=!1,M={},S={},Y,Q,p=!0,Z=f.once(function(){y();L();r.attachImmersiveViewResizeHandler(C);r.attachTabDeselectHandler("ivImagesTab",t)});return function(d,f,g,h){x=this;J=d;m=f;x.render=function(d,f,g,h,k,l){p=!0;e();0===a+c?r.hideTabHeading("ivImagesTabHeading"):r.unhideTabHeading("ivImagesTabHeading");1===a+c?b("#ivThumbs").hide():b("#ivThumbs").show()};x.update=function(b){};r.attachTabSelectHandler("ivImagesTab",C)}});"use strict";D.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils",
"ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(f,k,l,b,h,F,w,r,e,d){function I(){m.delegate(".ivThumb","click",function(){var a=b(this);m.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(g.type="chromeful-video",g.index=a.attr("id").split("_")[1])})}function B(){var a=b("#ivVideosTab").height();m.css("height",a);var c=m.find(".vse-video-block");
z=a-r.getDimension(m,"padding-top")-r.getDimension(m,"padding-bottom");c.css({"max-height":a,overflow:"hidden"});if(P)m.css({"max-width":Math.floor(1.77*z)});else{var a=m.find(".vse-airy-container"),c=m.find(".vse-ib-metadata"),d=Math.floor(z-r.getDimension(c,"height")),e=Math.floor(1.77*d);a.css({"max-height":d,"max-width":e});c.css("max-width",e);K&&(a=m.find(".vse-vertical-scroll"),c=r.getDimension(a,"margin-top")+r.getDimension(a,"margin-bottom"),a.css("max-height",z-c))}}function D(){G();u&&
u.pause();M=!1;U=!0;n=null}function G(){M=!1;u&&u.pause()}function y(a){n=a.clickTimeStamp;p&&(d.get(f,"#ivVideoBlock",J,Z,ea),m=b("#ivVideoBlock"),x.getCurrentItem(),g=x.getCurrentItem(),S());B();M=!0;p=!1;L()}function H(a){p&&(m=b("#ivVideoBlock"),x.getCurrentItem(),g=x.getCurrentItem(),S());M&&L();B()}function q(b){u=b.airy;M&&u.play({isAsync:!0})}function L(){if(u&&(u.play({isAsync:!0,eventTimestamp:n||(new Date).getTime()}),w.postCountMetric("dpcc_vse_videoBlock_video_played"),U)){var b=E.ue;
b&&(b=b.count("dpcc_vse_videoingressclick"),b=(new Date).getTime()-b,w.postTimeMetric("dpcc_vse_vitff",b),U=!1)}}var t,C,x,J,m,g,u,z,a,c,n,U=!0,p=!0,P=!1,K=!1,M=!1,S=f.once(function(){I();r.attachImmersiveViewResizeHandler(H);r.attachTabDeselectHandler("ivVideosTab",G);r.attachImmersiveViewResetHandler(D)}),Y=function(a,c,d){b("#ivVideoBlockSpinner").addClass("aok-hidden");w.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);a=x.getCurrentItem().color;a=h.getVideoHash(a,0,C);u||(u=
h.createAiryInstanceForChromeful(b("#ivVideoBlock"),a,C.airyConfig,"ImmersiveView"));P=!0;b("#ivVideoBlock").css({"max-width":1.77*z,margin:"0 auto"});M&&P&&u.play({isAsync:!0})},Q=function(a,c,e){p||d.get(a,"#ivVideoBlock",J,Z,ea);b("#ivVideoBlockSpinner").addClass("aok-hidden")},Z=function(b,a,c){K=!0;B();M&&L()},ea=function(b,a,c){w.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+a.pageContext.placement+"_"+a.configuration.type)};return function(b,d,g,k){t=this;C=b;x=d;t.render=function(b,
d,g,k,l,m){b=x.getCurrentItem().color;d=h.getVideoHash(b,0,C);a=C.colorToAsin[b]&&C.colorToAsin[b].asin;a=h.isDefined(a)?a:C.mediaAsin;c=null!==C.vseVideoDataSourceTreatment&&"T1"===C.vseVideoDataSourceTreatment?"ASIN":"physicalID";p=!0;-1===d?r.hideTabHeading("ivVideosTabHeading"):(r.unhideTabHeading("ivVideosTabHeading"),J={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:d.marketPlaceID,locale:d.languageCode,product:{contentID:a,contentIDType:"ASIN"},video:{contentID:d.mediaObjectId,
contentIDType:c,videoURL:d.url,imageURL:d.slateUrl},requestId:C.dpRequestId,metadata:{ProductTitle:C.title}},e.get(f,"#ivVideoBlock",J,Q,Y))};t.update=function(b){};r.attachTabSelectHandler("ivVideosTab",y);f.on("vseAiry",q)}});"use strict";D.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(f,k,l,b,h,F,w,r,e){function d(){var a=b("#iv360Tab").height();K.css("height",
a);var c=K.find("#ivTitle360").outerHeight(!0),d=K.find("#ivVariationSelection360").outerHeight(!0),f=K.find("#ivThumbs360"),g=e.getDimension(f,"margin-top")+e.getDimension(f,"margin-bottom");f.css("height",a-c-d-g);a=K.find("#ivStage360");c=K[0]&&K[0].getBoundingClientRect&&Math.floor(K[0].getBoundingClientRect().width)||K.width();a.css("width",c-e.getDimension(K,"padding-left")-e.getDimension(K,"padding-right")-K.find("#ivThumbColumn360").width()-e.getDimension(a,"margin-left")-e.getDimension(a,
"margin-right"))}function D(){y();var b=K.find("#ivLarge360");b.css({opacity:0});setTimeout(function(){b.css({opacity:.4});e.animateStageIn(b)},200);B()}function B(){if(0<V){var b=K.find(".iv360Hint");b.removeClass("iv360HintFaded");b.animate({opacity:1},200)}}function E(a,c){if(V<a.length){var d=b("\x3cimg /\x3e").css({display:"block",width:6*S+"px",height:Y+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(V++,1===V&&(B(),0<ga&&(w.time("dppc_loadTime360",
Date.now()-ga,p.mediaAsin),r.postTimeMetric("dppc_loadTime360",Date.now()-ga))),0<da&&(w.time("dppc_perSpriteloadTime360",Date.now()-da,p.mediaAsin),r.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-da)),K.find("#iv360Spinner").hide(),d.show(),ca=5*M.imageLocations[Math.floor(aa/M.imageLocations[0].length)][aa%M.imageLocations[0].length],E(a,c))};d.attr("src",a[V].replace(/(\._SP)\d+(,)\d+/,"$1"+Z+"$2"+Q));da=Date.now()}}function G(b){if(h.isDefined(M.spriteWidthSizes)&&0<M.spriteWidthSizes.length){var a=
M.spriteWidthSizes,c=a.length,d=a[0],e=a[c-1];if(b<=d)return d;if(b>e)return e;for(d=0;d<c;d++)if(b>a[d]&&b<=a[d+1])return a[d+1]}else return b}function y(){var a=K.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",
p.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),la=!0,H())}function H(){if(h.isDefined(M.spriteURLs)&&h.isDefined(K)&&la&&!fa){var a=K.find("#ivLarge360"),c=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});h.isDefined(M.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",
M.staticImages.hint360).appendTo(c);b("\x3cdiv\x3e").css({"text-align":"center"}).text(p.staticStrings.dragToSpin).appendTo(c);c.appendTo(a);var c=M.imageWidth,d=M.imageHeight,e=a.parent().width(),f=a.parent().height(),g=0,k=0;c/d>e/f?(Z=G(e),Q=Math.round(d/c*Z),S=Math.ceil(e),Y=Math.ceil(Q/Z*e),k=(f-Y)/2):(Q=G(f),Z=Math.round(c/d*Q),Y=Math.ceil(f),S=Math.ceil(Z/Q*f),g=(e-S)/2);a.css({"margin-left":g,"margin-top":k,width:S+"px",height:Y+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",
6*S+"px");E(M.spriteURLs,K.find("#image-360-sprites"),0);c=K.find("#ivLarge360");c.bind("mousedown",C);c.bind("touchstart",q);c.bind("touchmove",L);c.bind("touchend",t);b(document).bind("mousemove",x);b(document).bind("mouseup",J);h.isDefined(p.staticImages.grab)&&a.css("cursor","url('"+p.staticImages.grab+"'), auto");fa=!0}}function q(a){A=!0;ia=a.originalEvent.targetTouches[0].clientX}function L(a){A&&(m(a.originalEvent.targetTouches[0].clientX-ia),ia=a.originalEvent.targetTouches[0].clientX)}function t(a){A&&
(A=!1)}function C(a){T=!0;ea=a.originalEvent.clientX;h.isDefined(p.staticImages.grabbing)&&(a=K.find("#ivLarge360"),a.css("cursor","url('"+p.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+p.staticImages.grabbing+"'), auto"));return!1}function x(a){T&&(m(a.originalEvent.clientX-ea),ea=a.originalEvent.clientX)}function J(a){T&&(T=!1,h.isDefined(p.staticImages.grab)&&(a=K.find("#ivLarge360"),a.css("cursor","url('"+p.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"auto")))}function m(a){ca-=a/S*180;ja&&(w.count("dppc_360dragToSpin",p.mediaAsin),r.postCountMetric("dppc_360dragToSpin"));ja=!1;for(a=ca;0>a;)a+=360;for(;360<a;)a-=360;ca=a;var b;a=360;for(var c=0;c<V;c++)for(var d=0;d<M.imageLocations[c].length;d++){var e=Math.abs(ca-5*M.imageLocations[c][d]);e<a&&(a=e,b=c*M.imageLocations[0].length+d)}b!==aa&&(a=Math.floor(b/M.imageLocations[0].length),a!==Math.floor(aa/M.imageLocations[0].length)&&(h.isDefined(pa)||(pa=document.createElement("canvas").getContext("2d")),
c=K.find("#image-360-sprites").children(),pa.drawImage(c[a],0,0)),a=K.find(".iv360Hint").not(".iv360HintFaded"),h.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));aa=b;a=b%M.imageLocations[0].length*-1*S;b=-1*Math.floor(b/M.imageLocations[0].length)*Y;c=K.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function g(){if(ha){K=b("#ivMain360");var c=P.getCurrentItem().color;
z()&&a(c);M=z()?p.spin360ColorData[c]:void 0;e.populateTitle(K.find("#ivTitle360"),160,p);e.populateVariationSelection(K.find("#ivVariationSelection360"));K.find("#ivLarge360").empty();V=0;fa=la=!1;aa=ca=0;na();ha=!1}0!==b("#iv360Tab").height()&&(e.detachImmersiveViewResizeHandler(g),d(),D(),ga=Date.now(),v=ja=!0,w.count("dppc_click360",p.mediaAsin),r.postCountMetric("dppc_click360"))}function u(a){var b=p.colorToAsin[a],c={},d=500;if(!b||!b.asin)if(a===p.defaultColor)b={asin:p.winningAsin};else return;
c.params={asin:b.asin};var e="360"+b.asin,f=Date.now();c.success=function(b){w.time("dppc_asyncRequestTime360",Date.now()-f,p.mediaAsin);r.postTimeMetric("dppc_asyncRequestTime360",Date.now()-f);b&&h.isDefined(b.spin360.spin360Model)?(h.ajaxState(e,"success"),p.spin360ColorData[a]=b.spin360.spin360Model,a===P.getCurrentItem().color&&(M=p.spin360ColorData[a],H())):c.error()};c.error=function(){w.count("dppc_asyncFailed360",p.mediaAsin);r.postCountMetric("dppc_asyncFailed360");w.time("dppc_asyncRequestTime360",
Date.now()-f,p.mediaAsin);r.postTimeMetric("dppc_asyncRequestTime360",Date.now()-f);d*=2;16E3>=d?setTimeout(function(){f=Date.now();F.load("/gp/product/features/apparel-main-image/360.html",c)},d):h.ajaxState(e,"fail")};h.ajaxState(e)&&"fail"!==h.ajaxState(e)||(F.load("/gp/product/features/apparel-main-image/360.html",c),h.ajaxState(e,"sent"))}function z(){return h.isDefined(p.spin360ConfigEnabled)&&p.spin360ConfigEnabled}function a(a){return h.isDefinedAndNotEmpty(p.spin360ColorData[a])?!0:p.spin360ColorEnabled.hasOwnProperty(a)?
p.landingAsinColor===p.defaultColor?c():p.spin360ColorEnabled[a]:c()}function c(){return h.isDefined(p.spin360LazyLoadEnabled)&&p.spin360LazyLoadEnabled}function n(){v&&(w.time("dppc_duration360",Date.now()-ga,p.mediaAsin),r.postTimeMetric("dppc_duration360",Date.now()-ga),v=!1)}var U,p,P,K,M,S,Y,Q,Z,ea,ia,la=!1,fa=!1,ca=0,aa=0,ga=0,da=0,T=!1,A=!1,V=0,pa,ja=!0,v=!1,ha=!0,na=f.once(function(){e.attachImmersiveViewResizeHandler(g);e.attachImmersiveViewResizeHandler(d);e.attachImmersiveViewResetHandler(n);
e.attachTabDeselectHandler("iv360Tab",n)});return function(d,k,l,m){U=this;p=d;P=k;z()&&!c()&&(p.spin360ColorData[p.landingAsinColor]=p.spin360ColorData[p.defaultColor],p.spin360ColorEnabled[p.landingAsinColor]=p.spin360ColorEnabled[p.defaultColor]);h.isDefined(p.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",e.addStyleCodeToURL(p.staticImages.icon360,"_FMpng_RI_"));U.render=function(c,d,g,k,l,m){if(c===p.landingAsinColor||p.spin360ColorEnabled.hasOwnProperty(c))return ha=
!0,z()&&a(c)?(h.isUndefinedOrEmpty(p.spin360ColorData[c])&&(p.spin360ColorData[c]={},u(c)),b("#ivThumbs360").hide(),e.unhideTabHeading("iv360TabHeading")):e.hideTabHeading("iv360TabHeading"),h.isImmersiveViewEnabled(p,P.getCurrentItem().color)&&z()&&a(c)&&(d===p.maxAlts&&(c=k.find(".item.imageThumbnail"),g=k.find(".item.videoThumbnail"),h.isDefined(g)&&1<g.length?g.last().remove():c.last().remove(),d--),c=k.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
f.declarative.create(c,"button-360-click"),k.append(c),d++,w.count("dppc_display360",p.mediaAsin),r.postCountMetric("dppc_display360")),d};U.update=function(a){};e.attachTabSelectHandler("iv360Tab",g)}});D.register("nexusLogger360",function(){return{count:function(f,k){E.ue&&E.ue.event({asin:k,metricName:f,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(f,k,l){E.ue&&E.ue.event({asin:l,metricName:f,metricValue:k},"hit-360","hit360.clientEvent.3")}}});"use strict";D.when("postMetric",
"imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(f,k){try{var l=E.location.host,b={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},h=l.split(".")[1],F=-1===l.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==b[h]?b[h]:"https://www.amazon.com/vap/ew/",w="vse_lazyLoaderHook:success:",r="vse_lazyLoaderHook:error:",e="vse_preLoaderHook:success:",d="vse_preLoaderHook:error:",I=4E3,B=3}catch(N){k.logError("FATAL","vse_ns_desktop","[Domain] ",N)}D.register("vse_ns_preLoaderHook",
function(){function b(h,l){try{var q=h.A,r=h.block,t=h.request,w=h.handleFailure,x=h.handleSuccess,D=q.$;l--;var m=B-l-1,g=q.now();q.ajax(F+"componentbuilder",{params:t,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:t.timeout||I,withCredentials:!0,success:function(b){var a=q.now()-g;f.postTimeMetric(e,a);f.postCountMetric(e+t.page+":"+t.placement+":"+m);D(r).html(b);x(q,t,b)},error:function(e){f.postCountMetric(d+t.page+":"+t.placement+":"+m);(0===e.http.status||
500<=e.http.status&&599>=e.http.status)&&0<l?b(h,l):(f.postCountMetric(d,1),w(q,t,e))}})}catch(u){k.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",u)}}return{get:function(d,e,f,h,k){b({A:d,block:e,request:f,handleFailure:k,handleSuccess:h},B)}}});D.register("vse_ns_lazyLoaderHook",function(){function b(d,e,h){try{var l=d.A,t=d.context,C=d.handleFailure,x=d.handleSuccess;e.attr("data-configuration");var D=atob(e.attr("data-configuration")),m=JSON.parse(D),g={pageContext:t,configuration:m},
u=l.now();h--;var z=B-h-1;l.ajax(F+"subcomponent/"+m.type,{params:g,paramsFormat:"json",method:"post",contentType:"application/json",timeout:t.timeout||I,withCredentials:!0,success:function(a){var b=l.now()-u;f.postTimeMetric(w,b);f.postCountMetric(w+t.page+":"+t.placement+":"+m.type+":"+z);e.html(a);x(l,g,a)},error:function(a){f.postCountMetric(r+t.page+":"+t.placement+":"+m.type+":"+z);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<h?b(d,e,h):(f.postCountMetric(r,1),C(l,g,a))}})}catch(a){k.logError("FATAL",
"vse_ns_desktop","[vse_ns_lazyLoaderHook] ",a)}}return{get:function(d,e,f,h,k){var l=d.$;l(e+" div[data-configuration]").each(function(){b({A:d,context:f,handleFailure:k,handleSuccess:h},l(this),B)})}}})})});